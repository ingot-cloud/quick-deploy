# ==============================================================================
# MySQL 8.0 数据库配置
# ==============================================================================

# ==================== 基本配置 ====================
CONTAINER_NAME="mysql-db"
IMAGE_NAME="mysql:8.0"
CONTAINER_HOSTNAME="mysql.local"
RESTART_POLICY="unless-stopped"

# ==================== 网络配置 ====================
NETWORK_MODE="bridge"
# 如果需要使用静态 IP，请创建自定义网络:
# docker network create --subnet=172.20.0.0/16 backend-net
# NETWORK_NAME="backend-net"
# CONTAINER_IP="172.20.0.10"

# ==================== 端口映射 ====================
PORTS="3306:3306"

# ==================== 环境变量 ====================
ENV_VARS="
MYSQL_ROOT_PASSWORD=YourStrongPassword123!
MYSQL_DATABASE=myapp_db
MYSQL_USER=myapp_user
MYSQL_PASSWORD=MyApp_Pass123!
TZ=Asia/Shanghai
"

# ==================== 卷挂载 ====================
# 使用命名卷存储数据（推荐）
NAMED_VOLUMES="
mysql-data:/var/lib/mysql
"

# 可选：自定义配置文件
VOLUMES="
/data/mysql/conf.d:/etc/mysql/conf.d:ro
"

# ==================== 资源限制 ====================
CPU_LIMIT="2.0"
MEMORY_LIMIT="2g"

# ==================== 健康检查 ====================
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_CMD="mysqladmin ping -h localhost -u root -pYourStrongPassword123! || exit 1"
HEALTH_CHECK_INTERVAL="10s"
HEALTH_CHECK_TIMEOUT="5s"
HEALTH_CHECK_RETRIES="5"
HEALTH_CHECK_START_PERIOD="30s"

# ==================== 日志配置 ====================
LOG_DRIVER="json-file"
LOG_MAX_SIZE="50m"
LOG_MAX_FILE="5"

# ==================== 主机名映射 ====================
# 示例：如果需要访问其他服务
# EXTRA_HOSTS="
# 192.168.1.100:backup-server.local
# "

# ==================== 其他配置 ====================
LABELS="
app=mysql
version=8.0
environment=production
"

# 时区挂载
MOUNT_TIMEZONE="true"

