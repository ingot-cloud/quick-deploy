# ==============================================================================
# Redis 缓存服务器配置
# ==============================================================================

# ==================== 基本配置 ====================
CONTAINER_NAME="redis-cache"
IMAGE_NAME="redis:7-alpine"
CONTAINER_HOSTNAME="redis.local"
RESTART_POLICY="unless-stopped"

# ==================== 网络配置 ====================
NETWORK_MODE="bridge"
# 如果需要使用静态 IP:
# NETWORK_NAME="backend-net"
# CONTAINER_IP="172.20.0.11"

# ==================== 端口映射 ====================
PORTS="6379:6379"

# ==================== 环境变量 ====================
ENV_VARS="
TZ=Asia/Shanghai
"

# ==================== 卷挂载 ====================
# Redis 数据持久化
NAMED_VOLUMES="
redis-data:/data
"

# 自定义配置文件（可选）
VOLUMES="
/data/redis/redis.conf:/usr/local/etc/redis/redis.conf:ro
"

# ==================== 资源限制 ====================
CPU_LIMIT="1.0"
MEMORY_LIMIT="512m"

# ==================== 健康检查 ====================
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_CMD="redis-cli ping || exit 1"
HEALTH_CHECK_INTERVAL="10s"
HEALTH_CHECK_TIMEOUT="3s"
HEALTH_CHECK_RETRIES="3"
HEALTH_CHECK_START_PERIOD="10s"

# ==================== 日志配置 ====================
LOG_DRIVER="json-file"
LOG_MAX_SIZE="10m"
LOG_MAX_FILE="3"

# ==================== 其他配置 ====================
LABELS="
app=redis
version=7
environment=production
"

# 时区挂载
MOUNT_TIMEZONE="true"

# ==================== 启动命令 ====================
# 使用自定义配置文件启动（如果有配置文件）
CONTAINER_CMD="redis-server /usr/local/etc/redis/redis.conf"

# 如果不使用配置文件，可以直接用参数启动:
# CONTAINER_CMD="redis-server --appendonly yes --requirepass your_password"

