# ==============================================================================
# Nginx Web 服务器配置
# ==============================================================================

# ==================== 基本配置 ====================
CONTAINER_NAME="nginx-web"
IMAGE_NAME="nginx:alpine"
CONTAINER_HOSTNAME="nginx.local"
RESTART_POLICY="unless-stopped"

# ==================== 网络配置 ====================
NETWORK_MODE="bridge"
# 如果需要使用静态 IP:
# NETWORK_NAME="frontend-net"
# CONTAINER_IP="172.20.0.20"

# ==================== 端口映射 ====================
PORTS="80:80 443:443"

# ==================== 环境变量 ====================
ENV_VARS="
TZ=Asia/Shanghai
NGINX_HOST=localhost
NGINX_PORT=80
"

# ==================== 卷挂载 ====================
# 网站内容
VOLUMES="
/data/nginx/html:/usr/share/nginx/html:ro
/data/nginx/conf.d:/etc/nginx/conf.d:ro
/data/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
/data/nginx/logs:/var/log/nginx
/data/nginx/ssl:/etc/nginx/ssl:ro
"

# ==================== 资源限制 ====================
CPU_LIMIT="1.0"
MEMORY_LIMIT="256m"

# ==================== 健康检查 ====================
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_CMD="curl -f http://localhost/ || exit 1"
HEALTH_CHECK_INTERVAL="30s"
HEALTH_CHECK_TIMEOUT="5s"
HEALTH_CHECK_RETRIES="3"
HEALTH_CHECK_START_PERIOD="10s"

# ==================== 日志配置 ====================
LOG_DRIVER="json-file"
LOG_MAX_SIZE="20m"
LOG_MAX_FILE="5"

# ==================== 主机名映射 ====================
# 示例: 如果 Nginx 需要反向代理到其他服务
EXTRA_HOSTS="
172.20.0.10:backend-api.local
172.20.0.11:backend-cache.local
"

# ==================== DNS 配置 ====================
# 如果需要自定义 DNS
# DNS_SERVERS="8.8.8.8 8.8.4.4"
# DNS_SEARCH="local.example.com"

# ==================== 其他配置 ====================
LABELS="
app=nginx
version=alpine
environment=production
role=web-server
"

# 时区挂载
MOUNT_TIMEZONE="true"

# ==================== 安全配置 ====================
# Nginx 通常以非 root 用户运行
# RUN_AS_USER="nginx:nginx"

# 只读根文件系统（可选，提高安全性）
# READ_ONLY="true"
# 注意: 如果启用只读文件系统，需要挂载临时目录
# VOLUMES="$VOLUMES
# /tmp
# /var/cache/nginx
# /var/run
# "

